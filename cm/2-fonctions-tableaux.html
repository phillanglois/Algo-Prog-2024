

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2. Fonctions et tableaux &#8212; Algo-Prog 2024</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'cm/2-fonctions-tableaux';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="1. Fonctions" href="1-fonctions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../bonjour.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Algo-Prog 2024 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Algo-Prog 2024 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../bonjour.html">
                    Bienvenu en Algo-Prog !
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Présentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0-presentation-2024.html">1. Algo Prog en 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="competences.html">2. Compétences</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Les bases</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1-fonctions.html">1. Fonctions</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">2. Fonctions et tableaux</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/phillanglois/Algo-Prog-2024/main?urlpath=tree/algoprog2024/cm/2-fonctions-tableaux.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/phillanglois/Algo-Prog-2024/issues/new?title=Issue%20on%20page%20%2Fcm/2-fonctions-tableaux.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button"
   title="Open an issue"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/cm/2-fonctions-tableaux.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Fonctions et tableaux</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rappels-et-conventions">2.1. <strong>Rappels et conventions.</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifications-de-fonctions-avec-parametre-list-en-python">2.2. Spécifications de fonctions avec paramètre <code class="docutils literal notranslate"><span class="pre">list</span></code>  en python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comment-indiquer-le-type-d-un-parametre-formel-d-une-fonction-lorsque-celui-ci-est-une-liste">2.2.1. Comment indiquer le type d’un paramètre formel d’une fonction lorsque celui-ci est une liste ?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comment-specifier-une-fonction-avec-des-parametres-formels-de-type-tableau">2.2.2. Comment spécifier une fonction avec des paramètres formels de type tableau ?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exemples">2.3. Exemples</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min1">2.3.1. <code class="docutils literal notranslate"><span class="pre">min1()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#star-star-quelle-specification-pour-une-fonction-generique">2.4. (<span class="math notranslate nohighlight">\(\star\star\)</span>) Quelle spécification pour une fonction générique ?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.4.1. Généricité</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union-dans-le-module-typing-ou-pour-python-ge-3-10">2.4.2. <code class="docutils literal notranslate"><span class="pre">Union</span></code> dans le module <code class="docutils literal notranslate"><span class="pre">typing</span></code> ou <code class="docutils literal notranslate"><span class="pre">|</span></code> pour python <span class="math notranslate nohighlight">\(\ge\)</span> 3.10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-lire">2.4.3. A lire</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#synthese">2.5. Synthèse</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ce-qui-a-ete-vu">2.5.1. Ce qui a été vu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ce-qui-n-a-pas-ete-vu">2.5.2. Ce qui n’a pas été vu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-de-synthese">2.5.3. Exercice de synthèse</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="fonctions-et-tableaux">
<span id="ch-fonctions-tableaux"></span><h1><span class="section-number">2. </span>Fonctions et tableaux<a class="headerlink" href="#fonctions-et-tableaux" title="Permalink to this heading">#</a></h1>
<p>Mis à jour : Jan 17, 2024, lecture : 8 minutes minimum, PhL.</p>
<p>Dans ce chapitre, nous complétons l’étude des fonctions en python en présentant le cas des <strong>fonctions avec paramètre de type tableau</strong>, c-a-d. le cas de fonctions qui manipulent des arguments <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>Les tableaux mis en oeuvre avec des listes python sont entre autres rapellés dans l’annexe <span class="xref myst">a0 Boucles avancées</span>.</p>
<div class="alert alert-block alert-info">
<b>Vocabulaire.</b> distinguer la dimension d'un tableau <em>vs.</em> la taille d'un tableau
</div><p><strong>Dimension.</strong></p>
<ul class="simple">
<li><p>Un tableau peut être unidimensionnel (un vecteur), bidimensionnel (une matrice), tridimensionnel (une image 2D en couleurs (R,G,B)), …</p></li>
<li><p>Sa dimension est donc le <em>nombre d’indices</em> nécessaires pour localiser une de ses valeurs.</p></li>
</ul>
<p><strong>Taille.</strong></p>
<ul class="simple">
<li><p>Chacune des dimensions d’un tableau est composée d’un certain nombre de <em>valeurs de l’indice de cette dimension</em>.</p></li>
<li><p>La taille de ce tableau est <em>l’ensemble ordonné</em> de chacun de ces nombres pour chacune de ses dimensions.</p></li>
</ul>
<section id="rappels-et-conventions">
<h2><span class="section-number">2.1. </span><strong>Rappels et conventions.</strong><a class="headerlink" href="#rappels-et-conventions" title="Permalink to this heading">#</a></h2>
<p>Le vecteur <span class="math notranslate nohighlight">\((2, 4, 6)\)</span> est de dimension 1 et de taille 3.</p>
<p>La matrice</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{pmatrix}
    1 &amp; 2 &amp; 3 \\
    1 &amp; 4 &amp; 9 \\
\end{pmatrix}
\end{split}\]</div>
<p>est de dimension 2 et de taille (2, 3) :
elle contient 6 valeurs organisées en 2 lignes et 3 colonnes.</p>
<ul class="simple">
<li><p>La première valeur de sa taille est son nombre de lignes.</p></li>
<li><p>La seconde valeur de sa taille correspond à son nombre de colonnes.</p></li>
<li><p>Ce choix ligne, puis colonne, (puis …) est arbitraire mais usuel en maths, en algo, …</p></li>
</ul>
<p>Le vecteur colonne</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{pmatrix}
    1 \\
    0 \\
    0 \\
\end{pmatrix}
\end{split}\]</div>
<p>représente souvent le premier vecteur de la base orthonormée <span class="math notranslate nohighlight">\((i, j, k)\)</span> de <span class="math notranslate nohighlight">\(\mathbb{R}^ 3\)</span> est  de taille (3, 1).</p>
<p>Excepté le terme <em>tableau</em>, ces notions sont indépendantes de tout choix informatique.</p>
<p><strong>Ce qu’il ne faut pas faire :</strong> on pourrait <em>être tenté</em> d’écrire :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
</pre></div>
</div>
<p>Cette construction utilise le sens particulier du symbole <code class="docutils literal notranslate"><span class="pre">*</span></code>  appliqué à des listes 1D qui correspond à la répétition de <em>concaténation de listes</em>.
La concaténation de deux listes peut s’écrire en python avec le symbole <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">l1</span> <span class="o">+</span> <span class="n">l2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;l=&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>

<span class="n">l3_zeros</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l3_zeros</span><span class="p">)</span>

<span class="n">l3_uns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l3_uns</span><span class="p">)</span>

<span class="n">l3</span> <span class="o">=</span> <span class="n">l3_zeros</span> <span class="o">+</span> <span class="n">l3_uns</span> 
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;l3=&quot;</span><span class="p">,</span> <span class="n">l3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>l= [3, 4, 5]
[0, 0, 0]
[1, 1, 1]
l3= [0, 0, 0, 1, 1, 1]
</pre></div>
</div>
</div>
</div>
<p>Avant d’indiquer pourquoi il ne faut pas utiliser aveuglement cette définition par concaténation, présentons :</p>
<div class="important admonition">
<p class="admonition-title"><strong>Ce qu’il faut faire</strong></p>
<p>Pour définir et initialiser un tableau mono- ou multi-dimensionnel, utiliser systématiquement la <em>construction d’une liste par compréhension</em>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p>(<span class="math notranslate nohighlight">\(\star\)</span>) <strong>Pourquoi ?</strong></p>
<p>Le code suivant <em>à éviter</em> reprend la construction d’une liste 1D par concaténation et le fait qu’un tableau 2D est une liste de listes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># à ne pas faire</span>
<span class="n">l34_zeros</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l34_zeros</span><span class="p">)</span>

<span class="c1"># à ne pas faire</span>
<span class="n">l34_uns</span> <span class="o">=</span> <span class="p">[</span><span class="n">l3_uns</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l34_uns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]
[[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]]
</pre></div>
</div>
</div>
</div>
<p>L’affichage et des tests trop naïfs ne permettent pas d’exhiber pourquoi cette construction est dangereuse.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># definition de liste 2D en compréhension</span>
<span class="n">oui_comme_ca</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">oui_comme_ca</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oui_comme_ca</span> <span class="o">==</span> <span class="n">l34_zeros</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]
True
</pre></div>
</div>
</div>
</div>
<p>Il y a pourtant danger :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l34_zeros</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># je modifie UNE valeur de ce tableau</span>

<span class="nb">print</span><span class="p">(</span><span class="n">l34_zeros</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Aie ! &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0, 0, 1], [0, 0, 1], [0, 0, 1], [0, 0, 1]]
Aie ! 
</pre></div>
</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Quatre termes de la matrice ont été modifiées alors l’écriture désigne <strong>un seul terme</strong> de cette matrice.</p>
</div>
<p>Ce comportement assez piégeux peut être particulièrement long à identifier lors d’une phase de debug …</p>
<p><strong>Visualiser pour bien comprendre.</strong></p>
<p>Merci pythontutor !</p>
<ul class="simple">
<li><p><a class="reference external" href="http://pythontutor.com/visualize.html#code=v%20%3D%20%5B1,%202,%203%5D%0Anon%20%3D%20%5B0%5D%20*%203%0Aoui%20%3D%20%5B0%20for%20_%20in%20range%283%29%5D&amp;cumulative=false&amp;heapPrimitives=nevernest&amp;mode=edit&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">tableau 1D</a> : OK par concaténation et compréhension.</p></li>
<li><p><a class="reference external" href="http://pythontutor.com/visualize.html#code=%23%20tableau%202D%0Am%20%3D%20%5B%5B1,%202%5D,%20%5B3,%204%5D,%20%5B5,%206%5D%5D%0A%23%20bien%20regarder%20l'effet%20de%20la%20construction%20suivante%0Anon2%20%3D%20%5B%5B0%5D%20*%202%5D%20*%203%0A%23et%20de%20celle-ci%0Aoui2%20%3D%20%5B%5B0%20for%20i%20in%20range%282%29%5D%20for%20j%20in%20range%283%29%5D&amp;cumulative=false&amp;heapPrimitives=nevernest&amp;mode=edit&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">tableau 2D</a> : Oui par compréhension, NON par concaténation de listes !</p></li>
</ul>
<p><strong>Conclusion</strong>
Il vaut mieux s’interdire toute mauvaise habitude – même pour les listes 1D ou tableaux 1D.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Utiliser la définition de <strong>listes en compréhension :</strong></p>
<ul class="simple">
<li><p>1D : OUI à <code class="docutils literal notranslate"><span class="pre">[i</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(3)]</span></code></p></li>
<li><p>2D : OUI à <code class="docutils literal notranslate"><span class="pre">[[0</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(3)]</span> <span class="pre">for</span> <span class="pre">j</span> <span class="pre">in</span> <span class="pre">range(5)]</span></code></p></li>
</ul>
<p>Ne pas utiliser le symbole <code class="docutils literal notranslate"><span class="pre">*</span></code> de concaténation répétée pour créer et initialiser une liste.</p>
<ul class="simple">
<li><p>~~<code class="docutils literal notranslate"><span class="pre">[[0]</span> <span class="pre">*</span> <span class="pre">3]</span> <span class="pre">*</span> <span class="pre">5</span></code>~~</p></li>
</ul>
</div>
</section>
<section id="specifications-de-fonctions-avec-parametre-list-en-python">
<h2><span class="section-number">2.2. </span>Spécifications de fonctions avec paramètre <code class="docutils literal notranslate"><span class="pre">list</span></code>  en python<a class="headerlink" href="#specifications-de-fonctions-avec-parametre-list-en-python" title="Permalink to this heading">#</a></h2>
<p>La spécification d’une fonction doit comporter le type de ses paramètres formels.<br />
On s’était limité aux paramètres formels de types scalaires <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">complex</span></code>.</p>
<p><strong>Pourquoi introduire cette notion maintenant ?</strong></p>
<ul class="simple">
<li><p>la fonction est la construction élémentaire pour regrouper un traitement éventuellement complexe qui dépend de paramètres (d’entrée)</p></li>
<li><p>la vérification de la correction d’un traitement (à l’aide de tests unitaires) est facile à mettre en oeuvre lorsqu’il est défini sous la forme d’une fonction</p>
<ul>
<li><p>il suffit d’appeler la fonction pour des paramètres bien choisis – c-a-d. pour lesquels le traitement attendu est connu.</p></li>
</ul>
</li>
<li><p>une fonction doit être décrite par sa spécification (son en-tête, sa signature)</p></li>
</ul>
<p>Nous allons écrire des traitements un peu complexes sur des tableaux.
Donc nous avons besoin de <em>fonctions</em> qui manipulent des <em>tableaux</em>, et donc de leur <em>spécification</em>.</p>
<section id="comment-indiquer-le-type-d-un-parametre-formel-d-une-fonction-lorsque-celui-ci-est-une-liste">
<h3><span class="section-number">2.2.1. </span>Comment indiquer le type d’un paramètre formel d’une fonction lorsque celui-ci est une liste ?<a class="headerlink" href="#comment-indiquer-le-type-d-un-parametre-formel-d-une-fonction-lorsque-celui-ci-est-une-liste" title="Permalink to this heading">#</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Evolutions des annotations de typage</p>
<ul class="simple">
<li><p>python <span class="math notranslate nohighlight">\(&lt;\)</span> 3.9 : module <code class="docutils literal notranslate"><span class="pre">typing</span></code> nécessaire pour définir <code class="docutils literal notranslate"><span class="pre">List[...]</span></code> avec une majuscule</p></li>
<li><p>python <span class="math notranslate nohighlight">\(\ge\)</span> 3.9 : possibilité d’utiliser le type <code class="docutils literal notranslate"><span class="pre">list[...]</span></code> sans majuscule et sans importer le module <code class="docutils literal notranslate"><span class="pre">typing</span></code></p></li>
<li><p>python <span class="math notranslate nohighlight">\(\ge\)</span> 3.10 : le symbole <code class="docutils literal notranslate"><span class="pre">|</span></code> pour désigner l’union de types (ex <code class="docutils literal notranslate"><span class="pre">Union</span></code>)</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La suite de ce chapitre utilise les possibilités de python 3.9.</p>
</div>
<p>Le type d’un tableau (représenté par une liste) sera décrit avec la syntaxe <code class="docutils literal notranslate"><span class="pre">list[type_val]</span></code> où <code class="docutils literal notranslate"><span class="pre">type_val</span></code> est le type des valeurs du tableau.</p>
<p><em>Exemples.</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list[int]</span></code> : un tableau 1D d’entiers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list[float]</span></code> : un tableau 1D de flottants</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list[str]</span></code> : un tableau 1D de caractères <em>ou</em> de chaîne de caractères.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list[list[int]]</span></code> : un tableau 2D d’entiers représenté par une liste de listes</p></li>
</ul>
<p>Cette syntaxe permet d’expliciter le type (unique) des valeurs contenues dans un tableau.</p>
</section>
<section id="comment-specifier-une-fonction-avec-des-parametres-formels-de-type-tableau">
<h3><span class="section-number">2.2.2. </span>Comment spécifier une fonction avec des paramètres formels de type tableau ?<a class="headerlink" href="#comment-specifier-une-fonction-avec-des-parametres-formels-de-type-tableau" title="Permalink to this heading">#</a></h3>
<p>Pour chaque paramètre formel de type tableau (représenté par une liste python), on <em>complète</em> la spécification de la fonction <em>avec</em> autant de <em>paramètres</em> nécessaires à la définition de <em>la dimension du tableau</em> : un paramètre supplémentaire pour un tableau 1D, deux pour un tableau 2D, …</p>
<p>Montrons avec des exemples comment préciser la (ou les) taille(s) fixe(s) d’un tableau.</p>
<p><strong>Exemple :</strong>
la fonction <code class="docutils literal notranslate"><span class="pre">min1()</span></code> doit retourner la valeur minimale d’un tableau 1 D <code class="docutils literal notranslate"><span class="pre">t</span></code>, d’entiers (par exemple) et de taille <code class="docutils literal notranslate"><span class="pre">n</span></code> quelconque.</p>
<p>La spécification de cette fonction s’écrira :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min1</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;retourne la valeur minimale du tableau d&#39;entiers t de taille n&#39;&#39;&#39;</span>

</pre></div>
</div>
<ul class="simple">
<li><p>La taille <code class="docutils literal notranslate"><span class="pre">n</span></code> est définie ici comme second paramètre de cette fonction.</p>
<ul>
<li><p>C’est bien un entier</p></li>
</ul>
</li>
<li><p>Ce paramètre supplémentaire n’est pas nécessaire en python mais <strong>il est obligatoire dans cet enseignement</strong></p></li>
</ul>
<p>Nous étendons cette pratique aux tableaux multidimensionnels.</p>
<p>Par exemple, la spécification de la fonction qui identifie et retourne la valeur minimale dans un tableau 2D s’écrit par exemple (pour un tableau 2D d’entiers) :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min2</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;retourne la valeur minimale du tableau 2D d&#39;entiers t de taille n x m&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>Remarquons :</p>
<ul class="simple">
<li><p>l’annotation du type de <code class="docutils literal notranslate"><span class="pre">t</span></code>, paramètre formel de “type tableau 2D”, comme une liste de listes d’entiers,</p></li>
<li><p>et les 2 paramètres de taille <code class="docutils literal notranslate"><span class="pre">n</span></code> et <code class="docutils literal notranslate"><span class="pre">m</span></code>, qui désignent respectivement le nombre de lignes et de colonnes de <code class="docutils literal notranslate"><span class="pre">t</span></code>.</p></li>
</ul>
<div class="alert alert-block alert-info">
    <b>Convention à appliquer dans cet enseignement.</b> 
<p>Lorsqu’une fonction admet un paramètre formel de type tableau (ou plus d’un), on convient que les paramètres de taille de chaque paramètre tableau suivent sa définition dans la spécification de la fonction.</p>
</div>    
<p><strong>Exemples.</strong></p>
<ul class="simple">
<li><p>si il y a 1 paramètre tableau 1D, on écrit dans l’ordre les types de <code class="docutils literal notranslate"><span class="pre">tab1,</span> <span class="pre">taille_de_tab1</span></code></p></li>
<li><p>si il y a 2 paramètres tableaux 1D, on écrit dans l’ordre les types de  <code class="docutils literal notranslate"><span class="pre">tab1,</span> <span class="pre">taille_de_tab1,</span> <span class="pre">tab2,</span> <span class="pre">taille_de_tab2</span></code></p></li>
<li><p>si il y a 1 paramètre tableau 2D, on écrit dans l’ordre les types de <code class="docutils literal notranslate"><span class="pre">tab1,</span> <span class="pre">nb_lignes_de_tab1,</span> <span class="pre">nb_colonnes_de_tab1</span></code>,</p></li>
<li><p>…</p></li>
</ul>
</section>
</section>
<section id="exemples">
<h2><span class="section-number">2.3. </span>Exemples<a class="headerlink" href="#exemples" title="Permalink to this heading">#</a></h2>
<p>On présente ici la fonction <code class="docutils literal notranslate"><span class="pre">min1()</span></code> qui calcule la valeur minimale d’un tableau 1D d’entiers.</p>
<p>Se référer ensuite à l’annexe <span class="xref myst">a0 - Boucles avancées</span> dont <strong>tous</strong> les exemples définissent des fonctions avec des paramètres tableaux.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min2()</span></code> calcule la valeur minimale d’un tableau 2D</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prod_mat_carrees()</span></code> calcule C = A <span class="math notranslate nohighlight">\(\times\)</span> B ou A,B,C sont des matrices entières carrées de taille n <span class="math notranslate nohighlight">\(\times\)</span> n</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">existe_doublon()</span></code> calcule si il existe ou non une valeur qui apparaît au moins deux fois dans un tableau.</p></li>
</ul>
<section id="min1">
<h3><span class="section-number">2.3.1. </span><code class="docutils literal notranslate"><span class="pre">min1()</span></code><a class="headerlink" href="#min1" title="Permalink to this heading">#</a></h3>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">min1</span></code> qui retourne la valeur minimale d’un tableau 1 D d’entiers (par exemple) et de taille <span class="math notranslate nohighlight">\(n\)</span> quelconque.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min1</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;retourne la valeur minimale du tableau d&#39;entiers t de taille n&#39;&#39;&#39;</span>
    <span class="n">val_min</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">val_min</span><span class="p">:</span>
            <span class="n">val_min</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">val_min</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#un appel de test sur un tableau de taille 3</span>
<span class="n">u</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">un</span> <span class="o">=</span> <span class="n">min1</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">un</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p><strong>Obligation <em>pédagogique</em> de définir le(s) paramètre(s) pour la taille d’un paramètre tableau.</strong></p>
<p>python permet en effet de se dégager de cette obligation, entre autres grâce à la fonction prédéfinie <code class="docutils literal notranslate"><span class="pre">len()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min1_bis_moche</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;retourne la valeur minimale du tableau d&#39;entiers t de taille n&#39;&#39;&#39;</span>
    <span class="n">val_min</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">val_min</span><span class="p">:</span>
            <span class="n">val_min</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">val_min</span> 
</pre></div>
</div>
</div>
</div>
<p>Ce qui n’empêche pas de se servir de <code class="docutils literal notranslate"><span class="pre">len()</span></code> <em>dans l’appel</em>. Et c’est ce qu’on fera en général.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">min1</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">))</span> <span class="o">==</span> <span class="n">min1</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p><strong>Exercice.</strong></p>
<ul class="simple">
<li><p>Ecrire la spécification et le corps d’une fonction qui retourne la valeur minimale d’un tableau de <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p>(<span class="math notranslate nohighlight">\(\star\)</span>)  Qu’en pensez-vous ?</p></li>
<li><p>(<span class="math notranslate nohighlight">\(\star\)</span>) Quelles conditions satisfaire pour une généralisation (correcte) de ce traitement ?</p>
<ul>
<li><p>La <span class="xref myst">section</span> de ce chapitre aborde cette question.</p></li>
</ul>
</li>
</ul>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Réponse<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text">Il suffit de remplacer l’indication de type <code class="docutils literal notranslate"><span class="pre">int</span></code> par <code class="docutils literal notranslate"><span class="pre">float</span></code> dans l’en-tête et le corps des fonctions précédentes.</p></li>
<li><p class="sd-card-text">En revanche en python, si on veut distinguer les 2 traitements, il faut que les fonctions aient des noms différents.</p></li>
<li><p class="sd-card-text">Le traitement (chercher le min de …) est identique dès qu’une relation d’ordre est définie pour le type des valeurs présentes dans le tableau.</p></li>
</ul>
</div>
</details></section>
</section>
<section id="star-star-quelle-specification-pour-une-fonction-generique">
<span id="genericite"></span><h2><span class="section-number">2.4. </span>(<span class="math notranslate nohighlight">\(\star\star\)</span>) Quelle spécification pour une fonction générique ?<a class="headerlink" href="#star-star-quelle-specification-pour-une-fonction-generique" title="Permalink to this heading">#</a></h2>
<div class="alert alert-warning">
<p>Objectif 20 : compléments.</p>
<p>Sauter cette section en première lecture.</p>
</div><section id="id1">
<h3><span class="section-number">2.4.1. </span>Généricité<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>Cette section s’est d’abord appelée :</p>
<blockquote>
<div><p>“Comment spécifier un traitement générique ?”</p>
</div></blockquote>
<p>Commençons par expliquer cette formulation un peu plus compliquée que le titre actuel.</p>
<ul class="simple">
<li><p><em>spécifier</em> : écrire la spécification (d’une fonction)</p></li>
<li><p><em>spécifier un traitement</em> : suppose que le traitement est réalisé par une fonction dont on doit écrire la spécification</p></li>
<li><p><em>un traitement générique</em>, ou une fonction générique : un traitement qui <strong>s’applique</strong> de façon similaire à des valeurs de <strong>types différents</strong>.</p></li>
</ul>
<p>Exemple :</p>
<ul>
<li><p>les <em>corps</em> des fonctions qui retournent le min de deux entiers ou deux flottants, sont identiques. OK ?</p></li>
<li><p>en revanche leurs spécifications sont, jusqu’à présent, différentes :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min_int</span><span class="p">(</span><span class="n">a</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="k">def</span> <span class="nf">min_float</span><span class="p">(</span><span class="n">a</span> <span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</pre></div>
</div>
</li>
</ul>
<p>En python, on peut écrire une <em>seule</em> fonction <code class="docutils literal notranslate"><span class="pre">mon_min()</span></code> qui accepte indifféremment des paramètres entiers ou flottants.<br />
Cette fonction <code class="docutils literal notranslate"><span class="pre">mon_min()</span></code> est générique.<br />
Il est facile de l’écrire avec une seule fonction <em>python</em> mais sans indication de spécification – ce qui est <em>mal</em> :)</p>
</section>
<section id="union-dans-le-module-typing-ou-pour-python-ge-3-10">
<h3><span class="section-number">2.4.2. </span><code class="docutils literal notranslate"><span class="pre">Union</span></code> dans le module <code class="docutils literal notranslate"><span class="pre">typing</span></code> ou <code class="docutils literal notranslate"><span class="pre">|</span></code> pour python <span class="math notranslate nohighlight">\(\ge\)</span> 3.10<a class="headerlink" href="#union-dans-le-module-typing-ou-pour-python-ge-3-10" title="Permalink to this heading">#</a></h3>
<p><strong>Question.</strong> Comment écrire sa spécification sans perdre d’information par rapport aux deux spécifications ci-dessus ?</p>
<p><strong>Réponse.</strong></p>
<ul class="simple">
<li><p>Pour python <span class="math notranslate nohighlight">\(&lt;\)</span> 3.10 : on a besoin du module <code class="docutils literal notranslate"><span class="pre">typing</span></code> qui définit <code class="docutils literal notranslate"><span class="pre">Union</span></code> avec le sens de l’union d’ensembles en mathématique.</p></li>
<li><p>Pour python <span class="math notranslate nohighlight">\(\ge\)</span> 3.10 : le symbole <code class="docutils literal notranslate"><span class="pre">|</span></code>  remplace <code class="docutils literal notranslate"><span class="pre">Union</span></code> (et l’import de <code class="docutils literal notranslate"><span class="pre">typing</span></code> n’est plus nécessaire).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La suite de ce chapitre utilise les possibilités de python 3.9. :::</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>
</pre></div>
</div>
</div>
</div>
<p>Ainsi <code class="docutils literal notranslate"><span class="pre">Union[int,</span> <span class="pre">str]</span></code> permet de désigner toute valeur de type <code class="docutils literal notranslate"><span class="pre">int</span></code>  ou de type <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p>De façon similaire, on peut utiliser <code class="docutils literal notranslate"><span class="pre">Union[int,</span> <span class="pre">float]</span></code>  pour spécifier notre fonction  générique <code class="docutils literal notranslate"><span class="pre">mon_min</span></code> qui traite indifféremment des paramètres entiers ou flottants.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mon_min</span><span class="p">(</span><span class="n">a</span> <span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">b</span> <span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">b</span>

<span class="n">res1</span> <span class="o">=</span> <span class="n">mon_min</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">res2</span> <span class="o">=</span> <span class="n">mon_min</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="n">res3</span> <span class="o">=</span> <span class="n">mon_min</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">res1</span><span class="p">,</span> <span class="n">res2</span><span class="p">,</span> <span class="n">res3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2 2.0 2
</pre></div>
</div>
</div>
</div>
<p><strong>Syntaxe.</strong> Attention aux <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> – et non pas des <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">)</span></code> – dans l’annotation de types – comme pour <code class="docutils literal notranslate"><span class="pre">list[]</span></code>.</p>
<p><strong>(<span class="math notranslate nohighlight">\(\star\)</span>) Attention.</strong></p>
<ul class="simple">
<li><p>Pourquoi je n’ai pas écrit que <code class="docutils literal notranslate"><span class="pre">Union[int,</span> <span class="pre">float]</span></code> avait le sens l’union (mathématique) des ensembles  d’entiers et de flottants ?</p></li>
<li><p>Parce qu’en python (et plus généralement en informatique avec <em>la notion de type</em> ) :</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">float</span>
</pre></div>
</div>
<p>On le vérifie :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">==</span> <span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>
<section id="a-lire">
<h3><span class="section-number">2.4.3. </span>A lire<a class="headerlink" href="#a-lire" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Sur les annotations de types : cet <a class="reference external" href="https://inventwithpython.com/blog/2019/11/24/type-hints-for-busy-python-programmers/">article</a> (déjà mentionné plus haut) est l’un des plus intéressants que j’ai rencontré sur le web en préparant ce cours.  En effet, la documentation de réference sur les <a class="reference external" href="https://mypy.readthedocs.io/en/stable/cheat_sheet_py3.html">annotations python</a> est assez peu commode à exploiter dans ce cas.</p></li>
</ul>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Réponses.<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Cherchez un peu svp ! Ensuite allez vérifier <span class="xref myst">ici</span></p>
</div>
</details></section>
</section>
<section id="synthese">
<h2><span class="section-number">2.5. </span>Synthèse<a class="headerlink" href="#synthese" title="Permalink to this heading">#</a></h2>
<section id="ce-qui-a-ete-vu">
<h3><span class="section-number">2.5.1. </span>Ce qui a été vu<a class="headerlink" href="#ce-qui-a-ete-vu" title="Permalink to this heading">#</a></h3>
<p><strong>Spécifier pour vérifier</strong> une fonction avec paramètre(s) de type tableau :</p>
<ul class="simple">
<li><p>avant python 3.9 : <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">typing</span> <span class="pre">import</span> <span class="pre">List</span></code>  # avec un <code class="docutils literal notranslate"><span class="pre">L</span></code> majuscule</p></li>
<li><p>depuis python 3.9 : <code class="docutils literal notranslate"><span class="pre">tab2D:</span> <span class="pre">[list[list[int]]</span></code> # avec un <code class="docutils literal notranslate"><span class="pre">l</span></code> minuscule</p></li>
<li><p>ajouter les paramètres de dimension</p>
<ul>
<li><p>appel avec la fonction préféfinie <code class="docutils literal notranslate"><span class="pre">len()</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="ce-qui-n-a-pas-ete-vu">
<h3><span class="section-number">2.5.2. </span>Ce qui n’a pas été vu<a class="headerlink" href="#ce-qui-n-a-pas-ete-vu" title="Permalink to this heading">#</a></h3>
<p>Les <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> du module <code class="docutils literal notranslate"><span class="pre">numpy</span></code> sont très utilisés en pratique et présentés dans <span class="xref myst">une annexe dédiée</span></p>
</section>
<section id="exercice-de-synthese">
<h3><span class="section-number">2.5.3. </span>Exercice de synthèse<a class="headerlink" href="#exercice-de-synthese" title="Permalink to this heading">#</a></h3>
<p>Dans un notebook jupyter dédié, s’intéresser aux problèmes de l’égalité, de la similarité et de la comparaison de deux tableaux 1D.</p>
<p><strong>Définitions</strong></p>
<ul class="simple">
<li><p>Deux tableaux sont <em>égaux</em> si ils contiennent les mêmes valeurs aux mêmes positions.</p></li>
<li><p>Deux tableaux sont <em>similaires</em>  si ils contiennent les mêmes valeurs avec le même nombre d’occurrences – indépendamment de leurs positions.</p></li>
<li><p>Deux tableaux sont comparables si ils contiennent les mêmes valeurs   si ils contiennent les mêmes valeurs avec le même nombre d’occurrences – indépendamment de leurs nombres d’occurrences et de leurs positions.</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./cm"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="1-fonctions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Fonctions</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rappels-et-conventions">2.1. <strong>Rappels et conventions.</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifications-de-fonctions-avec-parametre-list-en-python">2.2. Spécifications de fonctions avec paramètre <code class="docutils literal notranslate"><span class="pre">list</span></code>  en python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comment-indiquer-le-type-d-un-parametre-formel-d-une-fonction-lorsque-celui-ci-est-une-liste">2.2.1. Comment indiquer le type d’un paramètre formel d’une fonction lorsque celui-ci est une liste ?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comment-specifier-une-fonction-avec-des-parametres-formels-de-type-tableau">2.2.2. Comment spécifier une fonction avec des paramètres formels de type tableau ?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exemples">2.3. Exemples</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min1">2.3.1. <code class="docutils literal notranslate"><span class="pre">min1()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#star-star-quelle-specification-pour-une-fonction-generique">2.4. (<span class="math notranslate nohighlight">\(\star\star\)</span>) Quelle spécification pour une fonction générique ?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2.4.1. Généricité</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#union-dans-le-module-typing-ou-pour-python-ge-3-10">2.4.2. <code class="docutils literal notranslate"><span class="pre">Union</span></code> dans le module <code class="docutils literal notranslate"><span class="pre">typing</span></code> ou <code class="docutils literal notranslate"><span class="pre">|</span></code> pour python <span class="math notranslate nohighlight">\(\ge\)</span> 3.10</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-lire">2.4.3. A lire</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#synthese">2.5. Synthèse</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ce-qui-a-ete-vu">2.5.1. Ce qui a été vu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ce-qui-n-a-pas-ete-vu">2.5.2. Ce qui n’a pas été vu</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-de-synthese">2.5.3. Exercice de synthèse</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ph. Langlois
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>